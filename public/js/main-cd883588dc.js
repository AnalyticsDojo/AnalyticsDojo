"use strict";var main=window.main||{};main.ga=window.ga||function(){},main=function(e,t){var a=t.Mousetrap;return((window.gitter={}).chat={}).options={disableDefaultChat:!0},e.chat={},e.chat.isOpen=!1,e.chat.createHelpChat=function(){throw new Error("Sidecar chat has not initialized")},document.addEventListener("gitter-sidecar-ready",function(t){function n(){e.chat.isOpen||e.chat.mainChat.toggleChat(!0)}function i(){$("#chat-embed-main").addClass("is-collapsed"),document.activeElement.blur()}function o(){var e=$("#chat-embed-main").hasClass("is-collapsed");e?n():i()}e.chat.GitterChat=t.detail.Chat,e.chat.createHelpChat=function(t,a,n){n=t.replace(/([A-Z])/g," $1").replace("Java Script","JavaScript"),$("body").append('<aside id="chat-embed-help" class="gitter-chat-embed is-collapsed" />'),e.chat.helpChat=new e.chat.GitterChat({room:"freecodecamp/"+t,activationElement:!1,targetElement:$("#chat-embed-help")}),$(a).on("click",function(){var t=!$(this).hasClass("active");e.chat.helpChat.toggleChat(t),t&&$(a).addClass("active")});var i=!1;$("#chat-embed-help").on("gitter-chat-toggle",function(e){var t=!!e.originalEvent.detail.state;return i||(i=!0,$("#chat-embed-help > .gitter-chat-embed-action-bar").prepend('<div class="chat-embed-main-title"><span>'+n+"</span></div>")),t?$(a).addClass("active"):$(a).removeClass("active")})},$("body").append('<aside id="chat-embed-main" class="gitter-chat-embed is-collapsed" />'),e.chat.mainChat=new e.chat.GitterChat({room:"analyticsdojo/analyticsdojo",activationElement:!1,targetElement:$("#chat-embed-main")});var c=!1;$("#chat-embed-main").on("gitter-chat-toggle",function(){return c?null:(c=!0,$("body").hasClass("night")&&$("#chat-embed-main").addClass("night"),$("#chat-embed-main > .gitter-chat-embed-action-bar").prepend('<div class="chat-embed-main-title"><span>Analytics Dojo\'s Main Chat</span></div>'),null)}),$("#nav-chat-btn").on("click",function(e){e.ctrlKey||e.metaKey||o(),window.ga("send","event","Nav","clicked","Nav chat opened")}),a.bind("g c",o)}),e}(main,window),$(document).ready(function(){function e(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],t=arguments.length<=1||void 0===arguments[1]?"alert-info":arguments[1];return $(".flashMessage").append($("\n      <div class='alert "+t+"'>\n        <button class='close' type='button', data-dismiss='alert'>\n          <span class='ion-close-circled' />\n        </Button>\n        <div>"+e+"</div>\n      </div>\n    "))}function t(){if(!main.userId)return e("You must be logged in to use our themes.");var t=document.getElementById("map-aside-frame"),a=$("body");t&&(t.src=t.src),a.hide();var n=void 0;a.hasClass("night")?(a.removeClass("night"),n="default"):(a.addClass("night"),n="night"),a.fadeIn("100");var i={url:"/api/users/"+main.userId+"/update-theme",type:"POST",data:{theme:n},dataType:"json"};return $.ajax(i).success(function(){return console.log("theme updated successfully")}).fail(function(t){var a=void 0;try{a=JSON.parse(t.responseText).error.message}catch(n){return null}return a?e(a):null})}var a=window.Rx.Observable,n="X-CSRF-Token",i=function(e){jQuery.ajaxPrefilter(function(t,a,i){i.crossDomain||i.setRequestHeader(n,e)})};i($('meta[name="csrf-token"]').attr("content")),$("img").error(function(){$(this).unbind("error").attr("src","https://s3.amazonaws.com/analyticsdojo/placeholder.png")}),$.each($(".sr-only"),function(e,t){" Complete"===$(t).text()&&$(t).parents("p").addClass("manip-hidden")}),a.merge(a.fromEvent($("#night-mode"),"click"),a.create(function(e){window.Mousetrap.bind("g t n",function(){return e.onNext()})})).debounce(500).subscribe(t,function(e){return console.error(e)}),window.Mousetrap.bind("g n n",function(){window.location="/challenges/next-challenge"}),window.Mousetrap.bind("g n m",function(){window.location="/map"}),window.Mousetrap.bind("g n a",function(){window.location="/about"}),window.Mousetrap.bind("g n s",function(){window.location="/shop"}),window.Mousetrap.bind("g n o",function(){window.location="/settings"}),window.Mousetrap.bind("g n r",function(){window.location="https://github.com/freecodecamp/freecodecamp/"}),function(){var e="__flyerId__";$.ajax({url:"/api/flyers/findOne",method:"GET",dataType:"JSON",data:{filter:{order:"id DESC"}}}).fail(function(e){return console.error(e)}).done(function(t){var a=localStorage.getItem(e);t&&t.isActive&&a!==t.id&&($("#dismiss-bill").on("click",function(){localStorage.setItem(e,t.id)}),$("#bill-content").html(t.message),$("#bill-board").fadeIn())})}()});